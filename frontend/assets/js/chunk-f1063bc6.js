(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f1063bc6"],{6225:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ProjectFrame",{attrs:{index:"4"}},[a("ActivityContribute")],1)],1)},n=[],s=a("5dff"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{width:"100%",padding:"20px",border:"1px solid #eaeefb","border-top":"none"}},[a("el-page-header",{attrs:{content:"活动维度分析"},on:{back:t.goBack}})],1),t._v(" "),a("div",{staticClass:"title"},[t._v("\n          总体活动情况\n      ")]),t._v(" "),a("div",{staticClass:"cardlist"},[a("div",{staticClass:"card"},[a("div",{staticClass:"cardheader"},[t._v("总commit数")]),t._v("\n              "+t._s(this.data.commit.length)+"\n          ")]),t._v(" "),a("div",{staticClass:"card"},[a("div",{staticClass:"cardheader"},[t._v("总MR数")]),t._v("\n              "+t._s(this.data.mrs.length)+"\n          ")]),t._v(" "),a("div",{staticClass:"card"},[a("div",{staticClass:"cardheader"},[t._v("note(comment)个数")]),t._v("\n              "+t._s(this.data.note.length)+"\n          ")])]),t._v(" "),a("div",{staticClass:"title"},[t._v("\n          活跃度分析\n      ")]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"item",staticStyle:{height:"300px"},attrs:{id:"main"}})])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item"},[t._v("\n          什么是活跃度？"),a("br"),t._v("\n          某日的活跃度=commit数目+mr数目+note数目(issue 下的comment,mr下的comment,打开关闭issue等等操作)\n      ")])}],c=a("313e"),d={name:"ActivityContribute.vue",data:function(){return{data:{commit:[],issues:[],language:[],mrs:[],note:[]}}},methods:{goBack:function(){this.$router.go(-1)},getDateStr:function(t){var e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),n=e+"-";return a<10?n=n+"0"+a:n+=a,n+="-",i<10?n=n+"0"+i:n+=i,n},generateChart:function(){for(var t={},e=[],a=[],i=0;i<this.data.commit.length;i++)this.data.commit[i].date in t?t[this.data.commit[i].date]++:t[this.data.commit[i].date]=1;for(var n=0;n<this.data.note.length;n++){var s=new Date(this.data.note[n].created_at),r=this.getDateStr(s);r in t?t[r]++:t[r]=1}for(var o=0;o<this.data.mrs.length;o++){var d=new Date(this.data.mrs[o].created_at),l=this.getDateStr(d);l in t?t[l]++:t[l]=1}for(var v=13;v>=0;v--){var u=new Date;u=new Date(u.setDate(u.getDate()-v));var h=this.getDateStr(u);e.push(h),h in t?a.push(t[h]):a.push(0)}var m,p=document.getElementById("main"),g=c["a"](p);m={title:{text:"14日内活跃度趋势"},tooltip:{trigger:"axis"},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:{type:"value",axisLabel:{formatter:"{value} "}},series:[{name:"活跃度",type:"line",data:a}]},m&&g.setOption(m)}},created:function(){var t=this;this.projectId=this.$route.params.projectid,this.$axios({method:"get",url:"api/projects/statistic/activity?id="+this.projectId}).then((function(e){t.data=e.data.data,console.log(t.data),t.generateChart()})).catch((function(t){console.log(t),401==t.response.status||alert("发生错误"),window.location.href="http://127.0.0.1:3333/login"}))}},l=d,v=(a("be06"),a("2877")),u=Object(v["a"])(l,r,o,!1,null,"6b7baa26",null),h=u.exports,m={name:"ActivityContributeView",components:{ProjectFrame:s["a"],ActivityContribute:h},data:function(){return{projectId:this.$route.params.projectid}}},p=m,g=Object(v["a"])(p,i,n,!1,null,null,null);e["default"]=g.exports},81191:function(t,e,a){},be06:function(t,e,a){"use strict";a("81191")}}]);