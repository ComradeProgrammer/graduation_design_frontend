(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"42fb":function(t,e,s){"use strict";s("a9c7")},"5dff":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("MyHeader",{attrs:{title:"软工质量平台",avatar:""}}),t._v(" "),s("el-row",[s("el-col",{attrs:{span:4}},[s("div",[s("el-menu",{attrs:{"default-active":t.index},on:{select:t.handleSelect}},[s("el-menu-item",{attrs:{index:"1"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("需求看板")]},proxy:!0}])},[s("i",{staticClass:"el-icon-s-flag"})]),t._v(" "),s("el-menu-item",{attrs:{index:"2"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("缺陷看板")]},proxy:!0}])},[s("i",{staticClass:"el-icon-error"})]),t._v(" "),s("el-menu-item",{attrs:{index:"3"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("CI看板")]},proxy:!0}])},[s("i",{staticClass:"el-icon-data-analysis"})]),t._v(" "),s("el-menu-item",{attrs:{index:"4"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("贡献统计")]},proxy:!0}])},[s("i",{staticClass:"el-icon-warning"})])],1)],1)]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticStyle:{height:"10px"}}),t._v(" "),t._t("default")],2)],1)],1)},n=[],o=s("9839"),a={name:"ProjectFrame",props:["index"],components:{MyHeader:o["a"]},data:function(){return{projectId:""}},methods:{handleSelect:function(t,e){switch(console.log(t,e),t){case"1":this.$router.push("/project/"+this.projectId);break;case"2":this.$router.push("/project/"+this.projectId+"/bug");break;case"3":this.$router.push("/project/"+this.projectId+"/quality");break;case"4":this.$router.push("/project/"+this.projectId+"/contribute");break;default:console.log("unhandled index")}}},created:function(){this.projectId=this.$route.params.projectid}},r=a,c=s("2877"),l=Object(c["a"])(r,i,n,!1,null,null,null);e["a"]=l.exports},a9c7:function(t,e,s){},e707:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ProjectFrame",{attrs:{index:"1"}},[s("Demand",{attrs:{id:t.projectId}})],1)],1)},n=[],o=s("5dff"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"demand"}},[s("div",{staticClass:"topoperation"},[s("el-button",{attrs:{type:"primary"},on:{click:t.onCreateButtonClick}},[s("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"15px"}}),t._v("\n            新建阶段性目标\n        ")])],1),t._v(" "),t._l(t.info,(function(e,i){return[s("el-card",{key:e.id,staticClass:"box-card",scopedSlots:t._u([{key:"header",fn:function(){return[s("div",{staticClass:"card-header"},[s("span",[t._v("阶段性目标:"+t._s(e.title))]),t._v(" "),s("el-button",{staticClass:"button",on:{click:function(s){return t.onDetailButtonClick(e.id)}}},[t._v("查看详情")])],1)]},proxy:!0}],null,!0)},[t._v(" "),s("div",{staticClass:"text"},[t._v("已完成需求"+t._s(t.customInfo[i].allissue[0]))]),t._v(" "),s("div",{staticClass:"text",staticStyle:{float:"right"}},[t._v("需求总数 "+t._s(t.customInfo[i].allissue[0]+t.customInfo[i].allissue[1]))]),t._v(" "),s("el-progress",{attrs:{id:"progress","text-inside":!0,"stroke-width":26,percentage:t.customInfo[i].percentage}}),t._v(" "),s("div",{staticClass:"seperator",staticStyle:{"margin-left":"0"}},[s("el-tag",{attrs:{type:"danger"}},[t._v("P0")]),t._v(" "),s("div",{staticClass:"text"},[t._v("需求 进度:("+t._s(t.customInfo[i].p0issue[0])+"\n                    /\n                    "+t._s(t.customInfo[i].p0issue[1]+t.customInfo[i].p0issue[0])+")")])],1),t._v(" "),s("div",{staticClass:"seperator"},[s("el-tag",{attrs:{type:"warning"}},[t._v("P1")]),t._v(" "),s("div",{staticClass:"text"},[t._v("需求 进度:("+t._s(t.customInfo[i].p1issue[0])+"\n                   /\n                   "+t._s(t.customInfo[i].p1issue[1]+t.customInfo[i].p1issue[0])+")")])],1),t._v(" "),s("div",{staticClass:"seperator"},[s("el-tag",[t._v("P2")]),t._v(" "),s("div",{staticClass:"text"},[t._v("需求 进度:("+t._s(t.customInfo[i].p2issue[0])+"\n                    /\n                    "+t._s(t.customInfo[i].p2issue[1]+t.customInfo[i].p2issue[0])+")")])],1),t._v(" "),s("el-divider"),t._v(" "),s("i",{staticClass:"el-icon-share"}),t._v("Merge Request 总数 "+t._s(t.customInfo[i].mrinfo[0]+t.customInfo[i].mrinfo[1]+t.customInfo[i].mrinfo[2])+"\n            "),s("div",{staticStyle:{width:"40px",display:"inline-block"}}),t._v(" "),s("el-tag",{attrs:{type:"success"}},[t._v("Merged")]),t._v(" "),s("div",{staticClass:"text"},[t._v(t._s(t.customInfo[i].mrinfo[0]))]),t._v(" "),s("div",{staticStyle:{width:"40px",display:"inline-block"}}),t._v(" "),s("el-tag",{attrs:{type:"warning"}},[t._v("Opening")]),t._v(" "),s("div",{staticClass:"text"},[t._v(t._s(t.customInfo[i].mrinfo[1]))]),t._v(" "),s("div",{staticStyle:{width:"40px",display:"inline-block"}}),t._v(" "),s("el-tag",{attrs:{type:"danger"}},[t._v("Closed")]),t._v(" "),s("div",{staticClass:"text"},[t._v(t._s(t.customInfo[i].mrinfo[2]))]),t._v(" "),s("div",{staticStyle:{width:"40px",display:"inline-block"}})],1)]}))],2)},r=[],c={name:"Demand",props:["id"],methods:{countPxDemand:function(t,e){for(var s=[0,0],i=0;i<t.issues.length;i++)t.issues[i].labels.indexOf(e)>-1&&t.issues[i].labels.indexOf("feature")>-1&&("opened"!=t.issues[i].state?s[0]++:s[1]++);return s},countDemand:function(t){for(var e=[0,0],s=0;s<t.issues.length;s++)t.issues[s].labels.indexOf("feature")>-1&&("opened"!=t.issues[s].state?e[0]++:e[1]++);return e},countMr:function(t){for(var e=[0,0,0],s=0;s<t.mrs.length;s++)"closeed"==t.mrs[s].state?e[2]++:"merged"==t.mrs[s].state?e[0]++:e[1]++;return e},onCreateButtonClick:function(){this.$router.push("/project/"+this.id+"/createmilestone")},onDetailButtonClick:function(t){this.$router.push("/project/"+this.id+"/milestone/"+t)}},data:function(){return{info:[]}},computed:{customInfo:function(){for(var t=[],e=0;e<this.info.length;e++){var s=this.countDemand(this.info[e]),i=this.countPxDemand(this.info[e],"P0"),n=this.countPxDemand(this.info[e],"P1"),o=this.countPxDemand(this.info[e],"P2"),a=this.countMr(this.info[e]),r=0;s[0]+s[1]!=0&&(r=s[0]/(s[0]+s[1])*100),t.push({allissue:s,p0issue:i,p1issue:n,p2issue:o,mrinfo:a,percentage:r})}return t}},created:function(){var t=this;this.projectId=this.$route.params.projectid,this.$axios({method:"get",url:"api/projects/milestone/all?projectid="+this.projectId}).then((function(e){t.info=e.data})).catch((function(t){console.log(t),401==t.response.status||alert("发生错误"),window.location.href="http://127.0.0.1:3333/login"}))}},l=c,u=(s("42fb"),s("2877")),d=Object(u["a"])(l,a,r,!1,null,"75a8d5f1",null),p=d.exports,f={name:"ProjectDemand",components:{ProjectFrame:o["a"],Demand:p},data:function(){return{projectId:this.$route.params.projectid}}},v=f,_=Object(u["a"])(v,i,n,!1,null,null,null);e["default"]=_.exports}}]);