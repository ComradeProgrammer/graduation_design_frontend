(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ad75ee1c"],{"0111":function(t,e,i){"use strict";i("5a61")},1148:function(t,e,i){"use strict";var a=i("a691"),r=i("1d80");t.exports="".repeat||function(t){var e=String(r(this)),i="",n=a(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(i+=e);return i}},1396:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("ProjectFrame",{attrs:{index:"4"}},[i("UserContribute")],1)],1)},r=[],n=i("5dff"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"usercontributemain"},[i("div",{staticStyle:{width:"100%",padding:"20px",border:"1px solid #eaeefb","border-top":"none"}},[i("el-page-header",{attrs:{content:"分用户维度分析"},on:{back:t.goBack}})],1),t._v(" "),i("el-alert",{staticStyle:{width:"92%",margin:"5px auto","font-size":"20px"},attrs:{title:"在本页面以git中的用户名进行分析",type:"warning",effect:"dark"}}),t._v(" "),i("div",{staticClass:"usercontributetitle"},[t._v("\n          用户列表\n      ")]),t._v(" "),i("el-alert",{staticStyle:{width:"88%",margin:"10px auto","font-size":"20px"},attrs:{title:"点击列表条目选择要查看的用户",type:"success",effect:"dark"}}),t._v(" "),i("div",{staticClass:"usercontributeitem"},[i("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.table,"highlight-current-row":""},on:{"current-change":t.handleCurrentChange}},[i("el-table-column",{attrs:{prop:"gitname",label:"Git用户名",width:"300"}}),t._v(" "),i("el-table-column",{attrs:{prop:"gitlabname",label:"Gitlab用户名",width:"300"}}),t._v(" "),i("el-table-column",{attrs:{prop:"totalline",label:"代码行数",width:"300"}})],1)],1),t._v(" "),i("div",{staticClass:"usercontributetitle"},[t._v("\n          "+t._s(t.getvalue(t.currentRow,"gitname")+"详情")+"\n      ")]),t._v(" "),i("div",{staticClass:"usercontributetitle",staticStyle:{width:"85%",color:"white","background-color":"#909399"}},[t._v("\n          提交代码分析\n      ")]),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"usercontributetitle",staticStyle:{width:"85%",color:"white","background-color":"#909399"}},[t._v("\n          commit分析\n      ")]),t._v(" "),i("div",{staticClass:"cardlist"},[i("div",{staticClass:"card"},[i("div",{staticClass:"cardheader"},[t._v("代码行数平均值")]),t._v("\n              "+t._s(t.cut(t.currentRow.avg))+"\n          ")]),t._v(" "),i("div",{staticClass:"card"},[i("div",{staticClass:"cardheader"},[t._v("代码行数标准差")]),t._v("\n              "+t._s(t.cut(t.currentRow.bias))+"\n          ")]),t._v(" "),i("div",{staticClass:"card"},[i("div",{staticClass:"cardheader"},[t._v("代码行数异常阈值")]),t._v(" "),i("el-input",{staticStyle:{width:"50%"},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)]),t._v(" "),i("div",{staticClass:"usercontributeitem"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.currentRow.commits,"row-class-name":t.checkcommit}},[i("el-table-column",{attrs:{prop:"date",label:"提交日期",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"time",label:"提交时间",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"title",label:"提交信息",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{prop:"file_changed",label:"修改文件",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"insertions",label:"增加行",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"deletions",label:"删除行",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"total",label:"总计",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"message",label:"说明"}})],1)],1)],1)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"usercontributeitem"},[i("div",{staticStyle:{width:"60%",height:"300px",margin:"0 auto"},attrs:{id:"chart1"}})])}],l=(i("b680"),i("313e")),c={name:"UserContribute",data:function(){return{table:[],limit:100,currentRow:{row:"",gitname:"",gitlabname:"",totalline:"",language:{},commits:[],avg:0,bias:0}}},methods:{cut:function(t){return t.toFixed(3)},getvalue:function(t,e){return null==t?"":t[e]},handleCurrentChange:function(t){this.currentRow=t,console.log("handleCurrentChange"),console.log(t),this.generateChartA()},goBack:function(){this.$router.go(-1)},generateUserTable:function(){for(var t in this.data.linesByAuthor){var e=[],i=0,a=0,r=0;if(this.data.commitList.length>0){for(var n=0;n<this.data.commitList.length;n++)this.data.commitList[n].author==t&&(this.data.commitList[n]["message"]="",e.push(this.data.commitList[n]),this.data.commitList[n].insertions<this.limit&&this.data.commitList[n].deletions<this.limit&&(console.log("total",this.data.commitList[n].total),i+=this.data.commitList[n].total));a=i/e.length;for(var s=0,o=0;o<e.length;o++)e[o].insertions<this.limit&&e[o].deletions<this.limit&&(s+=(e[o].total-a)*(e[o].total-a));r=Math.sqrt(s/e.length)}var l={row:this.table.length,gitname:t,gitlabname:this.data.gitAuthorToGitlabUser[t],totalline:this.data.linesByAuthor[t],language:this.data.linesByAuthorByLanguage[t],commits:e,avg:a,bias:r};this.table.push(l)}console.log(this.table),0!=this.table.length&&(this.$refs.singleTable.setCurrentRow(this.table[0]),this.generateChartA())},generateChartA:function(){var t,e=document.getElementById("chart1"),i=l["a"](e),a=[];for(var r in this.currentRow.language)""!=r?a.push({value:this.currentRow.language[r],name:r}):a.push({value:this.currentRow.language[r],name:"others"});t={title:{text:"提交代码语言构成",subtext:"",left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:"",type:"pie",radius:"50%",data:a,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},t&&i.setOption(t)},checkcommit:function(t){var e=t.row,i=t.rowIndex;return e.insertions>this.limit||e.deletions>this.limit?(this.currentRow.commits[i].message="代码增删超过阈值","alert-row"):e.total>this.currentRow.avg+2*this.currentRow.bias||e.total<this.currentRow.avg-2*this.currentRow.bias?(console.log("total",e.total,"avg",this.currentRow.avg,"bias",this.currentRow.bias),this.currentRow.commits[i].message="代码增删超过2倍标准差","warning-row"):(this.currentRow.commits[i].message="","")}},created:function(){var t=this;this.projectId=this.$route.params.projectid,this.$axios({method:"get",url:"api/projects/statistic/user?id="+this.projectId}).then((function(e){t.data=e.data.data,console.log(t.data),t.generateUserTable()})).catch((function(t){console.log(t),401==t.response.status||alert("发生错误"),window.location.href="http://127.0.0.1:3333/login"}))}},u=c,h=(i("0111"),i("3c36"),i("2877")),d=Object(h["a"])(u,s,o,!1,null,"7e1bb1ac",null),m=d.exports,g={name:"UserContributeView",components:{ProjectFrame:n["a"],UserContribute:m},data:function(){return{projectId:this.$route.params.projectid}}},v=g,b=Object(h["a"])(v,a,r,!1,null,null,null);e["default"]=b.exports},"3c36":function(t,e,i){"use strict";i("4a05")},"408a":function(t,e,i){var a=i("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=a(t))throw TypeError("Incorrect invocation");return+t}},"4a05":function(t,e,i){},"5a61":function(t,e,i){},b680:function(t,e,i){"use strict";var a=i("23e7"),r=i("a691"),n=i("408a"),s=i("1148"),o=i("d039"),l=1..toFixed,c=Math.floor,u=function(t,e,i){return 0===e?i:e%2===1?u(t,e-1,i*t):u(t*t,e/2,i)},h=function(t){var e=0,i=t;while(i>=4096)e+=12,i/=4096;while(i>=2)e+=1,i/=2;return e},d=function(t,e,i){var a=-1,r=i;while(++a<6)r+=e*t[a],t[a]=r%1e7,r=c(r/1e7)},m=function(t,e){var i=6,a=0;while(--i>=0)a+=t[i],t[i]=c(a/e),a=a%e*1e7},g=function(t){var e=6,i="";while(--e>=0)if(""!==i||0===e||0!==t[e]){var a=String(t[e]);i=""===i?a:i+s.call("0",7-a.length)+a}return i},v=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){l.call({})}));a({target:"Number",proto:!0,forced:v},{toFixed:function(t){var e,i,a,o,l=n(this),c=r(t),v=[0,0,0,0,0,0],b="",f="0";if(c<0||c>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(b="-",l=-l),l>1e-21)if(e=h(l*u(2,69,1))-69,i=e<0?l*u(2,-e,1):l/u(2,e,1),i*=4503599627370496,e=52-e,e>0){d(v,0,i),a=c;while(a>=7)d(v,1e7,0),a-=7;d(v,u(10,a,1),0),a=e-1;while(a>=23)m(v,1<<23),a-=23;m(v,1<<a),d(v,1,1),m(v,2),f=g(v)}else d(v,0,i),d(v,1<<-e,0),f=g(v)+s.call("0",c);return c>0?(o=f.length,f=b+(o<=c?"0."+s.call("0",c-o)+f:f.slice(0,o-c)+"."+f.slice(o-c))):f=b+f,f}})}}]);